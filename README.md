6.1 갱신  ===============================

법안 여론분석 기능 실제 구현내용 구체화

문제 : 유사도 처리 = 작동 나름 잘 됨  그대로 가도 큰 문제는 없을 것으로 보이나 수치 조정에 주의

	법안명에 대한 뉴스기사 필터링에 이상 => 전체 단어 언급이 없어도 잡힘
 
	(ex : 민법 일부개정법률안이면 "민법"에도 반응하여 과적합)
 
	>> "단어가 뉴스기사에 포함될 때만 집계되도록 뉴스기사 수집"
 

"""로직 구성"""

법안명 N개를가져옴 -> N개 중 1개에 대해 : 

	뉴스기사 NUM개를 가져옴 -> NUM개 중 1개에 대해 :
 
		본문 가져옴 && 댓글 n개 가져오고 감정분석 모델 돌림

>> 22대수 법안 => "해당 년도 법안으로 범위 더 줄이기 (1년 이내)"

   db 기반 이번 년도 법안 리스트업 && 사용자 상호작용 (검색기능) 
   
뉴스기사는 법안 1개당 NUM=5개로해둔다음 실행시간에 따라 size 조절 (매크로선언)

사용자 요청시 더 많은 기사 불러오도록 구현

 사용자 검색시 그 법안에 대한 뉴스기사 바로 불러오도록 구현
 

"기존 방식 변경 => 뉴스기사만 있는 경우, 기사만 가져오도록 변경"

"페이지 레이아웃 러프 아래 참조"

 
@ 백엔드 먼저 완성한 후 그래프들처럼 마지막에 html 임베드

** 필터링 조건

=> 뉴스기사가 5개 이하인 법안들은 댓글 수집하지 않음 (리스트에 올리지 않음)

=> 날짜 조건 추가 & 5개 fill 조건 추가 : 최근 3달 이내에 뉴스기사가 5개이상 올라왔는가?

	5개이상 올라온 법안명에 대한 기사 리스트업 시 "유사도 처리 후에도 5개 유지하도록" 변경
 

@ 해결할 문제

=> 댓글에 대한 감정 분석에 LLM 을 도입할 수 있는가?

    기술/시간적 문제로 불가능하다면 어떻게 보완할 수 있는가?

![image](https://github.com/user-attachments/assets/908616a6-bef1-40cf-9d74-19b535121665)




5.28 갱신  ===============================

법안 개수 통계 그래프 & 위원회 비율 그래프 DB 연동 초기 단계 마무리 (배포시 추가설정 필요)

2개 모두 동적 그래프 (커서를 올리면 개수 표시됨, UI는 피그마와 상이함)

plotly graphic library & FastAPI & sqlalchemy

dash_app 에서 생성된 그래프를 app 형식으로 html 삽입 (iframe) 


* 문제 해결 memo

위원회 비율 그래프 대수 갱신 문제 => 쿼리 전달 오류, 5.28 해결
데이터 무결성 검수 : 3051건 (20) 행정안전 3610건 (21) 1439건 (22)
                    >> 8100건 (20~22대수 총) 합계 확인 완료

월별 법안 발의개수 2020년 데이터 공백 처리 문제 => AGE 범위 오류, 5.28 해결
